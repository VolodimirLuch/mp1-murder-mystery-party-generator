<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MP1 -- Murder Mystery Party Generator</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <header>
      <h1>Murder Mystery</h1>
      <p>Create a complete murder mystery party kit in minutes. Tailor it to your needs.</p>
    </header>

    <main>
      <div id="setupMode">
        <section class="card">
          <h2>Step 1: Players</h2>
          <div class="grid">
            <label>
              Player count (4-20)
              <input id="playerCount" type="number" min="4" max="20" value="6" />
            </label>
            <label>
              Player names (comma-separated, optional)
              <input id="playerNames" type="text" placeholder="Avery, Blake, Cameron" />
            </label>
            <label>
              Seed (optional)
              <input id="seedInput" type="number" placeholder="Leave blank for random" />
            </label>
            <label>
              Share code (optional)
              <input id="shareCodeInput" type="text" placeholder="Paste to load" />
            </label>
          </div>
          <div class="actions">
            <button id="loadShareCode">Load from Share Code</button>
          </div>
        </section>

        <section class="card">
          <h2>Step 2: Theme</h2>
          <div id="categoryList" class="category-grid"></div>
          <div class="actions">
            <button id="surpriseMe">Surprise Me</button>
          </div>
        </section>

        <section class="card">
          <h2>Step 3: Options</h2>
          <div class="grid">
            <label>
              Tone
              <select id="toneSelect">
                <option value="suspense">Suspense</option>
                <option value="serious">Serious</option>
                <option value="comedy">Comedy</option>
              </select>
            </label>
            <label>
              Duration
              <select id="durationSelect">
                <option value="45">45 minutes</option>
                <option value="60" selected>60 minutes</option>
                <option value="90">90 minutes</option>
              </select>
            </label>
          </div>
        </section>

        <section class="card">
          <h2>Step 4: Generate + Results</h2>
          <div class="actions">
            <button id="generateBtn" class="primary">Generate Game</button>
            <button id="regenerateBtn" disabled>Regenerate</button>
            <button id="exportBtn" disabled>Export JSON</button>
            <button id="copyShareBtn" disabled>Copy Share Code</button>
          </div>
          <div id="status" class="status"></div>
          <div id="spinner" class="spinner hidden"></div>
        </section>
      </div>

      <section id="results" class="card hidden">
        <div class="game-toolbar">
          <div>
            <h2>Game Board</h2>
            <div class="meta">
              <p><strong>Title:</strong> <span id="gameTitle"></span></p>
              <p><strong>Theme:</strong> <span id="themeSummary"></span></p>
            </div>
          </div>
          <div class="toolbar-actions">
            <button id="backToSetupBtn">Back to Setup</button>
            <button id="regenerateGameBtn">Regenerate</button>
            <button id="exportGameBtn">Export JSON</button>
            <button id="copyShareGameBtn">Copy Share Code</button>
          </div>
        </div>

        <div class="share-code-row">
          <strong>Share Code:</strong>
          <div id="shareCodeDisplay" class="share-code"></div>
          <button id="copyShareInline">Copy Share Code</button>
        </div>

        <div class="game-grid">
          <div class="panel">
            <h3>How to Play</h3>
            <ol id="howToPlay"></ol>
          </div>
          <div class="panel">
            <h3>Story Overview</h3>
            <div id="storyline"></div>
          </div>
          <div class="panel">
            <h3>Timeline</h3>
            <ul id="timeline"></ul>
          </div>
          <div class="panel">
            <h3>Props List</h3>
            <ul id="propsList"></ul>
          </div>
        </div>

        <div class="panel">
          <h3>Characters</h3>
          <div id="characterCards" class="card-grid"></div>
        </div>

        <div class="panel host-panel">
          <h3>Host View</h3>
          <div id="hostCard" class="host-card">
            <h4>Host View</h4>
            <p>Click to Reveal</p>
          </div>
        </div>

        <div class="hidden">
          <label>
            Choose character
            <select id="characterSelect"></select>
          </label>
          <div id="characterPacket" class="packet"></div>
          <button id="hostToggle">I am the host</button>
          <div id="hostContent" class="hidden">
            <button id="revealSolution">Reveal Solution</button>
            <div id="solutionContent" class="hidden"></div>
          </div>
        </div>
      </section>
    </main>

    <div id="modalOverlay" class="modal-overlay hidden" role="dialog" aria-modal="true">
      <div class="modal">
        <button id="modalClose" class="modal-close" type="button" aria-label="Close modal">Ã—</button>
        <div id="modalBody"></div>
      </div>
    </div>

    <script src="/static/app.js"></script>
  </body>
</html>
